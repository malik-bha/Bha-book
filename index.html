<!DOCTYPE html>
<html>
<head>
  <title>Signup Page</title>
</head>
<body>
  <div id="formDiv">
    <h2>Signup</h2>
    <form id="userForm">
      Name: <input type="text" id="name" required><br>
      Mobile: <input type="text" id="mobile" required><br>
      <button type="submit">Signup</button>
    </form>
  </div>

  <script>
    const webAppUrl = "https://script.google.com/macros/s/AKfycbzjCU30aGTnF1zT0l--J1MuNcNOEd7nCN0jZLw4GRNGG8mhJ_eFxjCppEJzydJzTBhi/exec";

    // یہاں اپنا welcome والا HTML یا اپنی ویب سائٹ کا URL لگائیں
    const personalURL = "malik.html";  // جیسے "dashboard.html" یا "https://mysite.com/welcome.html"

    // اگر پہلے signup ہو چکا ہے تو سیدھا personal URL پر redirect
    if (localStorage.getItem("signedUp") === "yes") {
      window.location.href = personalURL;
    }

    document.getElementById("userForm").addEventListener("submit", function(e) {
      e.preventDefault();

      const name = document.getElementById("name").value;
      const mobile = document.getElementById("mobile").value;

      // Save info locally
      localStorage.setItem("signedUp", "yes");
      localStorage.setItem("name", name);
      localStorage.setItem("mobile", mobile);

      // Send to Google Sheets
      fetch(webAppUrl, {
        method: "POST",
        headers: {
          "Content-Type": "application/json"
        },
        body: JSON.stringify({ name, mobile })
      })
      .then(response => response.text())
      .then(data => {
        // Redirect after successful signup
        window.location.href = personalURL;
      })
      .catch(error => {
        alert("Error sending data: " + error);
      });
    });
  </script>
</body>
</html>
