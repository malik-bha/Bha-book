<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>21Club Dashboard</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
@import url('https://fonts.googleapis.com/css2?family=Poppins:wght@300;500;700&display=swap');

*{box-sizing:border-box}

body{
    margin:0;
    background:#0b0f1a;
    font-family:'Poppins',sans-serif;
    color:#fff;
}

/* ===== TOP BAR ===== */
.topbar{
    display:flex;
    align-items:center;
    justify-content:space-between;
    padding:15px;
    background:#0f172a;
    box-shadow:0 4px 20px rgba(0,255,200,.2);
}

.user{
    display:flex;
    align-items:center;
}

.dp{
    width:44px;
    height:44px;
    border-radius:50%;
    background:linear-gradient(135deg,#00ffd5,#00bfa6);
    display:flex;
    align-items:center;
    justify-content:center;
    color:#000;
    font-weight:700;
    margin-right:10px;
}

.mobile{
    font-size:14px;
    color:#c7fdf5;
}

.logout{
    font-size:13px;
    padding:6px 14px;
    border-radius:10px;
    border:none;
    cursor:pointer;
    background:#ff4d4d;
    color:#fff;
}

/* ===== BALANCE CARD ===== */
.balance-card{
    margin:20px;
    padding:20px;
    border-radius:22px;
    background:linear-gradient(135deg,#020024,#090979,#00d4ff);
    box-shadow:0 0 25px rgba(0,212,255,.4);
}

.balance-card p{
    margin:0;
    font-size:14px;
    opacity:.9;
}

.balance{
    font-size:32px;
    font-weight:700;
    margin-top:6px;
}

/* ===== ACTIONS ===== */
.actions{
    display:flex;
    gap:15px;
    margin:20px;
}

.action{
    flex:1;
    padding:16px;
    text-align:center;
    border-radius:18px;
    font-weight:600;
    cursor:pointer;
}

.deposit{
    background:linear-gradient(135deg,#00ffd5,#00bfa6);
    color:#000;
}

.withdraw{
    background:linear-gradient(135deg,#ff6a6a,#ff3b3b);
}

/* ===== GAMES ===== */
.games{
    padding:20px;
}

.games h3{
    margin-bottom:15px;
    font-weight:500;
}

/* GAME GRID */
.grid{
    display:grid;
    grid-template-columns:repeat(3,1fr);
    gap:15px;
    margin-bottom:20px;   /* üëà €å€Å€å ÿßÿµŸÑ fix €Å€í */
}

/* GAME BOX */
.game {
    background: #121826;
    border-radius: 18px;
    padding: 0;
    height: 100px;
    display: flex;
    align-items: center;
    justify-content: center;
    overflow: hidden;
    cursor: pointer;
    box-shadow: 0 0 10px rgba(0, 255, 200, .15);
}

.game img{
    width:100%;
    height:100%;
    object-fit:cover;   /* üëà image poori dikhegi */
}

.game span{
    font-size:12px;
}

/* ===== GAME 1 FULL WIDTH ===== */
.game-full{
    grid-column:1 / -1;      /* üëà ŸæŸàÿ±€å ŸÑÿßÿ¶ŸÜ ŸÑ€í ŸÑ€í */
    padding:0;
    overflow:hidden;
}

.game-full img{
    width:100%;
    height:120px;
    object-fit:cover;        /* üëà PNG ŸæŸàÿ±€å ÿ∑ÿ±ÿ≠ fit */
    border-radius:18px;
    margin:0;
}

.game-full span{
    display:block;
    padding:8px 0;
    font-size:14px;
    font-weight:600;
}

/* ===== TOAST ===== */
.toast{
    position:fixed;
    bottom:-80px;
    left:50%;
    transform:translateX(-50%);
    background:#111;
    padding:14px 22px;
    border-radius:14px;
    box-shadow:0 0 20px rgba(0,255,200,.4);
    transition:.4s;
    font-size:14px;
}
.toast.show {
    bottom: 25px;
}

.balance-row {
    display: flex;
    align-items: center;
    gap: 10px;
}

.balance{
    line-height:1;   /* üëà €å€Å add ⁄©ÿ±Ÿà */
}

.refresh-btn{
    width:22px;
    height:22px;
    cursor:pointer;
    opacity:0.8;
    transition:.3s;
}

.refresh-btn:hover{
    opacity:1;
}

.refresh-btn.spin{
    animation:spin .8s linear;
}

@keyframes spin{
    from{transform:rotate(0deg)}
    to{transform:rotate(360deg)}
}

.toast.success{
    background:linear-gradient(135deg,#090979,#00bfa6);
    color:white;
}

.telegram-game{
    height:50px;   /* üëà €å€Åÿß⁄∫ height control ⁄©ÿ±Ÿà */
}

.telegram-game img{
    object-fit:cover;  /* üëà image cut ŸÜ€Å€å⁄∫ €ÅŸà⁄Ø€å */
}

</style>
</head>

<body>

<div class="topbar">
    <div class="user">
        <div class="dp">U</div>
        <div class="mobile" id="mobile"></div>
    </div>
    <button class="logout" onclick="logout()">Logout</button>
</div>

<div class="balance-card">
    <p>Wallet Balance</p>
    <div class="balance-row">
  <div class="balance" id="balance">‚Çπ0</div>
  <img src="refresh.png" class="refresh-btn" onclick="manualRefresh()" />
</div>
</div>

<div class="actions">
    <div class="action deposit" onclick="location.href='Deposit.html'">Deposit</div>
    <div class="action withdraw" onclick="location.href='Withdraw.html'">Withdraw</div>
</div>

<div class="games">
    <h3>Games</h3>
    
    <!-- First line: Game 1 only -->
    <div class="grid">
        <div class="game" style="grid-column: span 3;" onclick="openGame(1)">
            <img src="Game1.png" alt="Game 1">
        </div>
    </div>
    
    <!-- Next two lines: 3 games per line -->
    <div class="grid" style="grid-template-columns: repeat(3, 1fr); gap:15px;">
        <div class="game" onclick="openGame(2)">
            <img src="Game2.png" alt="Game 2">
        </div>
        <div class="game" onclick="openGame(3)">
            <img src="Game3.png" alt="Game 3">
        </div>
        <div class="game" onclick="openGame(4)">
            <img src="Game4.png" alt="Game 4">
        </div>
        <div class="game" onclick="openGame(5)">
            <img src="Game5.png" alt="Game 5">
        </div>
        <div class="game" onclick="openGame(6)">
            <img src="Game6.png" alt="Game 6">
        </div>
        <div class="game" onclick="openGame(7)">
            <img src="Game7.png" alt="Game 7">
        </div>
    </div>
</div>
        <div class="grid">
    <div class="game telegram-game" style="grid-column: span 3;" onclick="openTelegram()">
    <img src="telegram.png" alt="TELEGRAM">
</div>
</div>
</div>

<div id="toast" class="toast"></div>

<script>
const API_URL = "https://script.google.com/macros/s/AKfycbzq-CozHl9G9E4FN3aoFXa2Zq8uT5kX7WOpvMgwgBYzOe-ZpqSA_HjBb85AHWi7jwg/exec";

/* AUTH CHECK */
const mobile = localStorage.getItem("mobile");
if(!mobile){
    location.href="index.html";
}
document.getElementById("mobile").innerText = mobile;

/* DP LETTER */
document.querySelector(".dp").innerText = mobile[0];

/* BALANCE */
function loadBalance(){
    fetch(API_URL,{
        method:"POST",
        body:JSON.stringify({type:"getUser",mobile})
    })
    .then(r=>r.json())
    .then(d=>{
        if(d.balance!==undefined){
            // €å€Åÿß⁄∫ ÿ™ÿ®ÿØ€åŸÑ€å ⁄©€å ⁄Øÿ¶€å €Å€í: Number ÿßŸàÿ± toFixed(2) ⁄©ÿß ÿßÿ≥ÿ™ÿπŸÖÿßŸÑ
            let formattedBalance = Number(d.balance).toFixed(2);
            document.getElementById("balance").innerText = "‚Çπ" + formattedBalance;
        }
    });
}

loadBalance();
setInterval(loadBalance,100);

/* GAME */
function openGame(n){
    location.href = "game"+n+".html";
}

function openTelegram(){
    window.open("https://t.me/Club21Malik", "_blank");
}

/* LOGOUT */
function logout(){
    localStorage.clear();
    location.href="index.html";
}

function showToast(msg) {
    const toast = document.getElementById("toast");
    toast.innerText = msg;
    
    toast.className = "toast show success"; // üëà yahin se color change hota hai
    
    setTimeout(() => {
        toast.className = "toast";
    }, 2000);
}

function manualRefresh() {
    const btn = document.querySelector(".refresh-btn");
    btn.classList.add("spin");
    
    loadBalance();
    
    setTimeout(() => {
        btn.classList.remove("spin");
        showToast("Balance updated");
    }, 800);
}

</script>

</body>
</html>